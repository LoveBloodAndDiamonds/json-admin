# AGENTS.md

Инструкции для ИИ-агента в проекте `json-admin`.

## 1) Общие принципы

- Писать просто и читаемо, без лишней гибкости.
- Сохранять обратную совместимость публичного API, если явно не просят иначе.
- Не делать неочевидных архитектурных шагов без необходимости.

## 2) Python стиль (PEP8 + Ruff)

- Следовать PEP8 и текущему `ruff.toml`.
- Перед завершением изменений обязательно запускать:
  - `uv run ruff check .`
  - `uv run ruff format --check .`
- Использовать type hints в публичных методах и моделях.
- Использовать понятные имена (`build_info_block`, а не `func`).
- Не добавлять лишние `# noqa`; использовать только когда это действительно необходимо и с комментарием причины.
- Докстринги: короткие, по делу, в едином стиле для всего файла.

## 3) Модели и валидация

- Для страниц использовать модели из `jsonadmin/pages.py`.
- Не дублировать ручную валидацию там, где достаточно встроенной валидации Pydantic.
- Общие поля держать в `BasePage`.

## 4) UI/шаблоны

- Основной интерфейс рендерится через шаблоны в `jsonadmin/html/`.
- Для вкладки `HtmlPage` контент встраивается в тот же центральный `panel`, где у `JsonPage` редактор.
- Не делать отдельные «голые» страницы без базового шаблона.
- Избегать инлайнового дублирования разметки; предпочитать переиспользование текущих шаблонов.

## 5) Язык интерфейса

- Ошибки (error messages, исключения, backend-ответы): **на английском**.
- Элементы взаимодействия пользователя (кнопки, placeholder, подписи): **на русском**.
- Кнопки темы/выхода: иконки Font Awesome без текста, с `aria-label` и `title`.

## 6) Документация

- README поддерживать в актуальном состоянии после изменения API.
- Примеры в `examples/` должны быть рабочими и соответствовать текущему API.
- Не оставлять в README устаревшие параметры/поведение.

## 7) Проверка после изменений

Минимальный чеклист:

1. `uv run ruff check .`
2. `uv run ruff format --check .`
3. `python3 -m compileall jsonadmin examples/minimal_app.py`
4. Smoke-check импорта/инициализации `Admin` и страниц через `uv run python -c ...`
